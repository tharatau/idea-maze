diff -r -u --color up/chromium/chrome/browser/extensions/api/instance_id/instance_id_api.cc nw/chromium/chrome/browser/extensions/api/instance_id/instance_id_api.cc
--- up/chromium/chrome/browser/extensions/api/instance_id/instance_id_api.cc	2023-02-21 19:03:23.000000000 +0000
+++ nw/chromium/chrome/browser/extensions/api/instance_id/instance_id_api.cc	2023-02-25 19:07:08.661774452 +0000
@@ -61,9 +61,19 @@
     return RespondNow(Error(
         "chrome.instanceID not supported in incognito mode"));
   }
+
+  if (!IsEnabled()) {
+    return RespondNow(Error(
+        InstanceIDResultToError(instance_id::InstanceID::DISABLED)));
+  }
+
   return DoWork();
 }
 
+bool InstanceIDApiFunction::IsEnabled() const {
+  return instance_id::InstanceIDProfileService::IsInstanceIDEnabled();
+}
+
 instance_id::InstanceID* InstanceIDApiFunction::GetInstanceID() const {
   return instance_id::InstanceIDProfileServiceFactory::GetForProfile(
       Profile::FromBrowserContext(browser_context()))->driver()->
