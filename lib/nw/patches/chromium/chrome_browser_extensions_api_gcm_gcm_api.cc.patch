diff -r -u --color up/chromium/chrome/browser/extensions/api/gcm/gcm_api.cc nw/chromium/chrome/browser/extensions/api/gcm/gcm_api.cc
--- up/chromium/chrome/browser/extensions/api/gcm/gcm_api.cc	2023-02-21 19:03:23.000000000 +0000
+++ nw/chromium/chrome/browser/extensions/api/gcm/gcm_api.cc	2023-02-24 20:12:03.252811114 +0000
@@ -2,6 +2,7 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include "components/prefs/pref_service.h"
 #include "chrome/browser/extensions/api/gcm/gcm_api.h"
 
 #include <stddef.h>
@@ -96,6 +97,10 @@
     return false;
   }
 
+  if (!profile->GetPrefs()->GetBoolean("gcm.channel_status")) {
+    *error = "GCM is turned off.";
+    return false;
+  }
   return true;
 }
 
