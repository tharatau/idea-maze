diff -r -u --color up/chromium/components/gcm_driver/instance_id/instance_id_driver.cc nw/chromium/components/gcm_driver/instance_id/instance_id_driver.cc
--- up/chromium/components/gcm_driver/instance_id/instance_id_driver.cc	2023-02-21 19:03:23.000000000 +0000
+++ nw/chromium/components/gcm_driver/instance_id/instance_id_driver.cc	2023-02-25 19:07:13.685805292 +0000
@@ -4,12 +4,27 @@
 
 #include "components/gcm_driver/instance_id/instance_id_driver.h"
 
+#include "base/metrics/field_trial.h"
+#include "base/strings/string_util.h"
 #include "build/build_config.h"
 #include "components/gcm_driver/gcm_driver.h"
 #include "components/gcm_driver/instance_id/instance_id.h"
 
 namespace instance_id {
 
+namespace {
+const char kInstanceIDFieldTrialName[] = "InstanceID";
+const char kInstanceIDFieldTrialDisabledGroupPrefix[] = "Disabled";
+}  // namespace
+
+// static
+bool InstanceIDDriver::IsInstanceIDEnabled() {
+  std::string group_name =
+      base::FieldTrialList::FindFullName(kInstanceIDFieldTrialName);
+  return !base::StartsWith(group_name, kInstanceIDFieldTrialDisabledGroupPrefix,
+                           base::CompareCase::INSENSITIVE_ASCII);
+}
+
 InstanceIDDriver::InstanceIDDriver(gcm::GCMDriver* gcm_driver)
     : gcm_driver_(gcm_driver) {
 }
