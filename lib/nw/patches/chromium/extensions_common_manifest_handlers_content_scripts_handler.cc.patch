diff -r -u --color up/chromium/extensions/common/manifest_handlers/content_scripts_handler.cc nw/chromium/extensions/common/manifest_handlers/content_scripts_handler.cc
--- up/chromium/extensions/common/manifest_handlers/content_scripts_handler.cc	2023-02-21 19:03:23.000000000 +0000
+++ nw/chromium/extensions/common/manifest_handlers/content_scripts_handler.cc	2023-02-25 19:07:17.657826943 +0000
@@ -106,6 +106,11 @@
             : MatchOriginAsFallbackBehavior::kNever;
   }
 
+  // in main world
+  if (content_script.in_main_world) {
+    result->set_in_main_world(*content_script.in_main_world);
+  }
+
   bool wants_file_access = false;
   if (!script_parsing::ParseMatchPatterns(
           content_script.matches,
@@ -218,7 +223,7 @@
 
   const bool can_execute_script_everywhere =
       PermissionsData::CanExecuteScriptEverywhere(extension->id(),
-                                                  extension->location());
+                                                  extension->location(), extension->GetType());
   const int valid_schemes =
       UserScript::ValidUserScriptSchemes(can_execute_script_everywhere);
   const bool all_urls_includes_chrome_urls =
